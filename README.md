<p align="center">
   <img src="https://img.shields.io/badge/Solidity-0.8.9-lightgrey" alt="Solidity Version">
   <img src="https://img.shields.io/badge/HardHat-2.9.7-red" alt="HardHat Version">
   <img src="https://img.shields.io/badge/License-MIT-green" alt="License">
</p>

## About

### Стейкинг
Контракт стейкинга работает полностью в автономном режиме, не требует вызова каких-либо функций владельцем

(только задать время начала периода стейкинга, но его можно задать и в конструкторе, если нужно).

Перед началом пеериода стейка необходимо заминтить 30000 токенов ТТТ на контракт стейкинга

Наградная система - накопительная (забирать можно в любой момент)

Награда начисляется прямо пропорционально стейкам юзеров

Награда распределяется в соответствии с временем стейка (новая награда становится доступна каждые 24 часа после первого стейка)

После анстейка юзеру отправляется взя его доступная награда на данный момент

Юзер может стейкать и анстейкать неограниченное количество раз

Чтобы застейкать USDT необходима вызвать сначала approve() токена в контракте токена, а дальше вызвать функцию stake()

Контракт имеет массив totalStakedInDay чтобы запоминать сколько было всего застейкано в определенный день

Этот массив обновляется каждый раз когда кто-то стейкает или анстейкает

Каждый стейк в структуре юзера в массивы записываются размер стейка на данный момент, и в какой день был совершен стейк

Это необходимо для того чтобы проверять сколько было застейкано у юзера к концу определенного дня

При расчете награды, в функции getAwailableReward(), используется цикл for, максимальное количество повторений цикла - 30 раз

Внутри цикла for есть 2 цикла while, максимальное количество повторений на два цикла - 30 раз

(при условии, что в какие-то дни не будет происходить ни одного стейка или анстейка, или юзер будет стейкать каждый день)

Внутри циклов не изменяются глобальные переменные, поэтому расход газа (даже при максимальных повторениях) будет небольшой
Циклами нельзя манипулировать для каких-либо видов атак

### Тесты
В папке Test находятся тесты (там небольшой тест, я не совсем понял как полностью покрыть тестами контракт с данным тз)

Перед запуском необходимо установить HardHat локально

В папке Test выполнить команду - npm install --save-dev hardhat 

Для запуска тестов используйте команду - npx hardhat test

## Developers

- [dimokrit](https://github.com/dimokrit)
